<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The article is detailed</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="./images/logos/galaxynewslogo.jpg" type="image/x-icon">
</head>

<body class="bg-light">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="./">
                <div class="logo me-2" style="width: 45px; height: 45px;">
                    <img src="./images/logos/galaxynewslogo.jpg" alt="Galaxy News Logo"
                        class="img-fluid rounded-circle shadow-sm">
                </div>
                <span class="fw-bold fs-4">Galaxy News</span>
            </a>
        </div>
    </nav>
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <a href="index.html" class="btn btn-link text-decoration-none mb-4 ps-0 text-dark">
                    <i class="fas fa-arrow-left me-2"></i>Return to home page
                </a>

                <div id="contentArea">
                </div>
            </div>
        </div>
    </div>

    <footer class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold mb-3">Galaxy News</h5>
                    <p class="text-white-50">Your latest and most trusted news source</p>
                </div>
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold mb-3">Departments</h5>
                    <ul class="list-unstyled text-white-50">
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Entertainment</a></li>
                        <li class="mb-2"><a href="#" class="text-white-50 text-decoration-none">Crime</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold mb-3">Company</h5>
                    <ul class="list-unstyled text-white-50">
                        <li class="mb-2"><a href="./about.html" class="text-white-50 text-decoration-none">About us</a>
                        </li>
                    </ul>
                </div>
                <!-- <div class="col-md-3 mb-4">
                    <h5 class="fw-bold mb-3">Social networks</h5>
                    <div>
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
                    </div>
                </div> -->
            </div>
            <hr class="bg-white-50 my-4">
            <p class="text-center text-white-50 mb-0">&copy; 2026 News. All rights reserved.</p>
        </div>
    </footer>

    <script src="data.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const slugFromURL = params.get('title');
    
        // Slug yaratish funksiyasi (Solishtirish uchun shart)
        function generateSlug(title) {
            return title
                .toLowerCase()
                .trim()
                .replace(/[^\w\s-]/g, '')
                .replace(/[\s_-]+/g, '-')
                .replace(/^-+|-+$/g, '');
        }
    
        // Maqolani sarlavha (slug) orqali topish
        const article = newsData.find(a => generateSlug(a.title) === slugFromURL);
    
        if (article) {
            let contentHTML = "";
    
            // JSON ichidagi bloklarni HTMLga aylantirish
            article.content.forEach(block => {
                if (block.type === "p") {
                    contentHTML += `<p class="mb-4 fs-5 text-dark lh-lg" style="text-align: justify;">${block.text}</p>`;
                } else if (block.type === "h3") {
                    contentHTML += `<h3 class="mt-5 mb-3 fw-bold text-primary">${block.text}</h3>`;
                } else if (block.type === "img") {
                    // Rasm ostidagi matn (Caption) bo'lsa ko'rsatadi, bo'lmasa bo'sh qoldiradi
                    const captionHTML = block.caption 
                        ? `<figcaption class="text-muted mt-2 small fst-italic text-center">${block.caption}</figcaption>` 
                        : "";
    
                    contentHTML += `
                    <figure class="my-5 text-center">
                        <img src="${block.src}" class="img-fluid rounded shadow" alt="news">
                        ${captionHTML}
                    </figure>`;
                } else if (block.type === "video") {
                    // YouTube iframe qismi
                    contentHTML += `
                    <div class="ratio ratio-16x9 my-5 shadow-sm rounded overflow-hidden">
                        <iframe src="https://www.youtube.com/embed/${block.videoId}" 
                            title="YouTube video player" frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen></iframe>
                    </div>`;
                }
            });
    
            // Sahifaga ma'lumotlarni chiqarish
            document.getElementById('contentArea').innerHTML = `
                <span class="badge bg-primary mb-3 text-uppercase px-3 py-2">${article.category}</span>
                <h1 class="display-4 fw-bold mb-4">${article.title}</h1>
                <div class="mb-4 text-center">
                    <img src="${article.image}" alt="${article.title}" class="img-fluid rounded shadow w-100">
                </div>
                <div class="d-flex align-items-center text-muted mb-5 border-bottom pb-4">
                    <span><i class="fas fa-calendar-alt me-2"></i> ${new Date(article.date).toLocaleDateString('en-US')}</span>
                </div>
                <div class="article-body">
                    ${contentHTML}
                </div>
            `;
            document.title = article.title;
        } else {
            // Maqola topilmagandagi holat
            document.getElementById('contentArea').innerHTML = `
                <div class="text-center mt-5">
                    <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                    <h2 class="fw-bold">Sorry, article not found!</h2>
                    <p class="text-muted">The article may have been moved or deleted.</p>
                    <a href="./" class="btn btn-primary mt-3">Back to Home</a>
                </div>`;
        }
    </script>
</body>

</html>